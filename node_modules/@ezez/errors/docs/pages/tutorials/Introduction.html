<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Introduction | @ezez/errors - v6.0.2</title><meta name="description" content="Documentation for @ezez/errors - v6.0.2"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../../assets/style.css"/><link rel="stylesheet" href="../../assets/highlight.css"/><script async src="../../assets/search.js" id="search-script"></script><link rel="stylesheet" href="../../assets/pages.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base="../..">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="../../index.html" class="title">@ezez/errors - v6.0.2</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<ul class="tsd-breadcrumb">
<li><a href="../../modules.html">@ezez/errors - v6.0.2</a></li>
<li><a href="Introduction.html">Introduction</a></li></ul>
<h1> Introduction</h1></div>
<div class="tsd-panel tsd-typography"><p>This library is a battle-tested attempt to make creating custom errors easier. How many times you wanted to return
i.e.: http status code with an error?</p>
<p>Something like that surely works:</p>
<pre><code class="language-javascript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">error</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-3">&quot;Cannot do stuff&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">error</span><span class="hl-1">.</span><span class="hl-2">statusCode</span><span class="hl-1"> = </span><span class="hl-9">400</span><span class="hl-1">;</span><br/><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1">;</span>
</code></pre>
<p>But it&#39;s not very readable, you can&#39;t easily distinguish it from a regular error, and it&#39;s not type safe.</p>
<p>What if you could do something like that?</p>
<pre><code class="language-javascript"><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">APIError</span><span class="hl-1">(</span><span class="hl-3">&quot;Cannot do stuff&quot;</span><span class="hl-1">, { </span><span class="hl-2">statusCode:</span><span class="hl-1"> </span><span class="hl-9">400</span><span class="hl-1"> });</span>
</code></pre>
<p><code>@ezez/errors</code> allows you to do just that!</p>

<a href="#full-featured-usage" id="full-featured-usage" style="color: inherit; text-decoration: none;">
  <h1>Full-featured usage</h1>
</a>
<p>I propose to create a file with all your custom errors. You can later import them from there.</p>

<a href="#creating-and-extending-instances" id="creating-and-extending-instances" style="color: inherit; text-decoration: none;">
  <h2>Creating and extending instances</h2>
</a>
<p>To create a new error class use exported <code>createError</code> function.
The only argument is the error name, accessible later on <code>name</code> class property and all instances.</p>
<pre><code class="language-typescript"><span class="hl-4">// file: errors.ts</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">createError</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@ezez/errors&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">DatabaseError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">(</span><span class="hl-3">&quot;DatabaseError&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">QueryError</span><span class="hl-1"> = </span><span class="hl-2">DatabaseError</span><span class="hl-1">.</span><span class="hl-7">extend</span><span class="hl-1">(</span><span class="hl-3">&quot;QueryError&quot;</span><span class="hl-1">); </span><span class="hl-4">// extend custom error</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ApiParametersError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">(</span><span class="hl-3">&quot;ApiParametersError&quot;</span><span class="hl-1">, </span><span class="hl-2">TypeError</span><span class="hl-1">); </span><span class="hl-4">// extend built-in error</span>
</code></pre>
<p>We just created:</p>
<ul>
<li>a database error class</li>
<li>a query error class, i.e. for any error related to querying the database</li>
<li>an api parameters error class, i.e. for any error related to api parameters</li>
</ul>
<p>We used two available syntaxes for creating new error classes:</p>
<ul>
<li><code>createError(name, TypeError)</code> - use this one if you want to extend any native error (like <code>TypeError</code>, <code>SyntaxError</code>
etc.)</li>
<li><code>SomeError.extend(name)</code> - use this one if you want to extend your custom error</li>
</ul>
<blockquote>
<p>Note: Without TypeScript createError can be used for extending custom errors too, but it&#39;s recommended to still use
these methods as described above.</p>
</blockquote>

<a href="#throwing-errors" id="throwing-errors" style="color: inherit; text-decoration: none;">
  <h2>Throwing errors</h2>
</a>
<p>Throw your errors like you would throw any other error:</p>
<pre><code class="language-typescript"><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">DatabaseError</span><span class="hl-1">(</span><span class="hl-3">&quot;Connection lost&quot;</span><span class="hl-1">);</span>
</code></pre>
<p>Or feel the power of <code>@ezez/errors</code> and throw errors with extra data:</p>
<pre><code class="language-typescript"><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">DatabaseError</span><span class="hl-1">(</span><span class="hl-3">&quot;Connection lost&quot;</span><span class="hl-1">, { </span><span class="hl-2">date:</span><span class="hl-1"> </span><span class="hl-2">Date</span><span class="hl-1">.</span><span class="hl-7">now</span><span class="hl-1">(), </span><span class="hl-2">uptime:</span><span class="hl-1"> </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-7">uptime</span><span class="hl-1">() });</span><br/><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">QueryError</span><span class="hl-1">(</span><span class="hl-3">&quot;Query failed&quot;</span><span class="hl-1">, { </span><span class="hl-2">query:</span><span class="hl-1"> </span><span class="hl-3">&quot;SELECT * FROM users&quot;</span><span class="hl-1">, </span><span class="hl-2">date:</span><span class="hl-1"> </span><span class="hl-2">Date</span><span class="hl-1">.</span><span class="hl-7">now</span><span class="hl-1">(), </span><span class="hl-2">queryTime:</span><span class="hl-1"> </span><span class="hl-9">1234</span><span class="hl-1"> });</span>
</code></pre>

<a href="#catching-errors" id="catching-errors" style="color: inherit; text-decoration: none;">
  <h2>Catching errors</h2>
</a>
<p>First, a humble reminder - in JavaScript anything can be thrown. It can be built-in errors like <code>TypeError</code> or just
<code>Error</code>, custom errors like these created with <code>@ezez/errors</code> or even plain objects or primitives.</p>
<p>While it&#39;s an evil practice to <code>throw 100</code> - it&#39;s still possible, so always typecheck your errors before using them.</p>
<pre><code class="language-typescript"><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-7">QueryError</span><span class="hl-1">(</span><span class="hl-3">&quot;Query failed&quot;</span><span class="hl-1">, { </span><span class="hl-2">query:</span><span class="hl-1"> </span><span class="hl-3">&quot;SELECT * FROM users&quot;</span><span class="hl-1"> });</span><br/><span class="hl-1">}</span><br/><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">QueryError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">, </span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">details</span><span class="hl-1">?.</span><span class="hl-2">query</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-3">&quot;Not an error type&quot;</span><span class="hl-1">, </span><span class="hl-2">e</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><strong>Important reminder:</strong></p>
<p><code>instanceof</code> will check if given value is an instance of given type or any of its ancestors. This means if you do
multi-level extends with your classes - always check for the most specific type first, then for the less specific
(this is also why we used <code>else</code> in this example). You can always check the <code>name</code> property of the error as well.</p>
<pre><code class="language-typescript"><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-7">DatabaseError</span><span class="hl-1">(</span><span class="hl-3">&quot;Connection failed&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">QueryError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// this is true, because QueryError is a subclass of DatabaseError</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">); </span><span class="hl-4">// &quot;DatabaseError&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// this is also true, we are missing `else` so this part of code will execute as well</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#type-safety" id="type-safety" style="color: inherit; text-decoration: none;">
  <h1>Type safety</h1>
</a>
<blockquote>
<p>If you don&#39;t use TypeScript, you can skip this section.</p>
</blockquote>
<p>When creating an error class with <code>createError</code> function, you can pass a generic type that defines the type of extra
data you may want to throw with your error. Omitting it will allow any data to be passed.</p>
<pre><code class="language-typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">QueryError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">&lt;{ </span><span class="hl-2">query</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1"> }&gt;(</span><span class="hl-3">&quot;QueryError&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">QueryError</span><span class="hl-1">(</span><span class="hl-3">&quot;Query failed&quot;</span><span class="hl-1">, { </span><span class="hl-2">query:</span><span class="hl-1"> </span><span class="hl-3">&quot;SELECT * FROM users&quot;</span><span class="hl-1"> });</span><br/><span class="hl-1">}</span><br/><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">QueryError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">, </span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">details</span><span class="hl-1">?.</span><span class="hl-2">query</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><code>e.details?.</code> has intellisense support, so you can easily see what data is available and work with it.</p>
<p>Why optional chaining then? <code>details</code> property is always optional, even if you specify the shape of extra data - you
<strong>don&#39;t have</strong> to pass anything, but you <strong>can</strong> pass data that matches the shape.</p>
<blockquote>
<p>Note: When extending a class that defines a shape of extra data, your subclass will inherit that shape. If you want
you can provide a <strong>subtype</strong> of the shape, ie: add additional properties to it.</p>
<p>This is to provide extra type safety. See <code>Important reminder</code> of <code>Catching errors</code> section.</p>
</blockquote>

<a href="#bonus-features" id="bonus-features" style="color: inherit; text-decoration: none;">
  <h1>Bonus features</h1>
</a>

<a href="#normalizing-errors" id="normalizing-errors" style="color: inherit; text-decoration: none;">
  <h2>Normalizing errors</h2>
</a>
<p>Instead of doing typechecks if something caught is not an error you can normalize any value to be an error. Every error
class created with <code>createError</code> has a static method <code>normalize</code> you can use to achieve that.</p>
<pre><code class="language-typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">BaseError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">(</span><span class="hl-3">&quot;BaseError&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-9">5</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">error</span><span class="hl-1"> = </span><span class="hl-2">BaseError</span><span class="hl-1">.</span><span class="hl-7">normalize</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">// you can now be sure that `error` is an instance of `BaseError` or any of native errors.</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">error</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Normalizing can be done with three modes:</p>
<ul>
<li><code>instanceof</code> - it will NOT normalize if given value is instance of <code>Error</code></li>
<li><code>strict</code> - it will NOT normalize if given value looks very close to an <code>Error</code> instance, but it doesn&#39;t do
<code>instanceof</code> check - instead it checks if given value has <code>name</code>, <code>message</code>, <code>stack</code> properties, that are
non-enumerable strings, and <code>name</code> is ending with <code>Error</code>. This is the default mode. It should support most node errors
that doesn&#39;t follow the &quot;thrown values have to be <code>instanceof</code> Error&quot; practice.</li>
<li><code>loose</code> - it will NOT normalize anything that has <code>name</code>, <code>message</code> and <code>stack</code> properties. Use it if you work with a
lot of bad error lookalikes, but for some reason you want to keep them.</li>
</ul>

<a href="#building-an-error-from-another-error" id="building-an-error-from-another-error" style="color: inherit; text-decoration: none;">
  <h2>Building an error from another error</h2>
</a>
<p>Sometimes you want to throw an error that is based on another error. For example, you want to throw a <code>RenderError</code>
but you want to keep the original error message and stack trace. You can do that!</p>
<pre><code class="language-typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">RenderError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">(</span><span class="hl-3">&quot;RenderError&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">renderHTML</span><span class="hl-1"> = () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-7">render</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">originalError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// Make sure to ensure that `originalError` is an instance of `Error`!</span><br/><span class="hl-1">        </span><span class="hl-4">// See `Normalizing errors` section for more info.</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">RenderError</span><span class="hl-1">(</span><span class="hl-3">&quot;Failed to render HTML&quot;</span><span class="hl-1">, { </span><span class="hl-2">date:</span><span class="hl-1"> </span><span class="hl-2">Date</span><span class="hl-1">.</span><span class="hl-7">now</span><span class="hl-1">() }, </span><span class="hl-2">originalError</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">renderHTML</span><span class="hl-1">()</span><br/><span class="hl-1">}</span><br/><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">RenderError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">, </span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">details</span><span class="hl-1">?.</span><span class="hl-2">date</span><span class="hl-1">); </span><span class="hl-4">// RenderError: Failed to render HTML, 123456789</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">parent</span><span class="hl-1">?.</span><span class="hl-2">message</span><span class="hl-1">); </span><span class="hl-4">// i.e.: Error: cannot read property `foo` of undefined</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">error</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">ancestors</span><span class="hl-1">); </span><span class="hl-4">// array of [parent, parent of that parent, ...until there is no parent]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#throwing-an-error-freedom" id="throwing-an-error-freedom" style="color: inherit; text-decoration: none;">
  <h2>Throwing an error freedom</h2>
</a>
<p>When creating instance of your error it expects three values:</p>
<ul>
<li><code>{string}</code> - a message</li>
<li><code>{object}</code> - error details</li>
<li><code>{Error}</code> - parent error</li>
</ul>
<p>What&#39;s important - you can even skip some of them and provide null/undefined instead.</p>
<blockquote>
<p>Note: If you pass some argument type twice (like two strings) - you will instead get a <code>TypeError</code> thrown.</p>
</blockquote>
<blockquote>
<p>Note: If you skip error message, but provide parent error - the message will be copied from the parent error.</p>
</blockquote>

<a href="#advanced-usage-demo-and-the-names-property" id="advanced-usage-demo-and-the-names-property" style="color: inherit; text-decoration: none;">
  <h1>Advanced usage demo and the <code>names</code> property</h1>
</a>
<p><code>names</code> property is an array of strings that describe the hierarchy of errors. It can be useful to understand what
happened if you log your errors and review them later.</p>
<p>Let&#39;s take a look at the example:</p>
<pre><code class="language-javascript"><span class="hl-1">[</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;DatabaseError&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    [</span><span class="hl-3">&quot;TypeError&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;Error&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;InternalServerError&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Error&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">]</span>
</code></pre>
<p>This means that <code>DatabaseError</code> was instantiated with <code>TypeError</code> error as argument. <code>TypeError</code> inherits from <code>Error</code>.
And <code>DatabaseError</code> inherits from <code>InternalServerError</code> which inherits from <code>Error</code>.</p>
<p>This array is safe to be stringified for logging purposes, it will look like this when stringified:
<code>&quot;(DatabaseError,(TypeError,Error),InternalServerError,Error)&quot;</code></p>
<p>Now let&#39;s take a look at more complex example:</p>
<pre><code class="language-javascript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">NotFoundError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">(</span><span class="hl-3">&quot;NotFoundError&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">InternalServerError</span><span class="hl-1"> = </span><span class="hl-7">createError</span><span class="hl-1">(</span><span class="hl-3">&quot;InternalServerError&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">DatabaseError</span><span class="hl-1"> = </span><span class="hl-2">InternalServerError</span><span class="hl-1">.</span><span class="hl-7">extend</span><span class="hl-1">(</span><span class="hl-3">&quot;DatabaseError&quot;</span><span class="hl-1">)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">RenderError</span><span class="hl-1"> = </span><span class="hl-2">InternalServerError</span><span class="hl-1">.</span><span class="hl-7">extend</span><span class="hl-1">(</span><span class="hl-3">&quot;RenderError&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">UnknownError</span><span class="hl-1"> = </span><span class="hl-2">InternalServerError</span><span class="hl-1">.</span><span class="hl-7">extend</span><span class="hl-1">(</span><span class="hl-3">&quot;UnknownError&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">// A database operations handler example</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">db</span><span class="hl-1"> = { </span><span class="hl-7">query</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">query</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-4">// Some implementation, let&#39;s assume it throws an error</span><br/><span class="hl-1">   </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">DatabaseError</span><span class="hl-1">(</span><span class="hl-3">&quot;Database query failed&quot;</span><span class="hl-1">, { </span><span class="hl-2">query</span><span class="hl-1"> });</span><br/><span class="hl-1">}};</span><br/><br/><span class="hl-4">// Function that gets a product from database</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">getProduct</span><span class="hl-1"> = </span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">id</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">TypeError</span><span class="hl-1">(</span><span class="hl-3">&quot;Product id is missing&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1"> = </span><span class="hl-2">db</span><span class="hl-1">.</span><span class="hl-7">query</span><span class="hl-1">(</span><span class="hl-3">&quot;SELECT * FROM products WHERE id = ?&quot;</span><span class="hl-1">, </span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">data</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">NotFoundError</span><span class="hl-1">(</span><span class="hl-3">&quot;Product cannot be found&quot;</span><span class="hl-1">, { </span><span class="hl-2">id</span><span class="hl-1"> });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">// Function that renders a product page using given data</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">renderProduct</span><span class="hl-1"> = (</span><span class="hl-2">product</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// Some implementation, let&#39;s assume it throws an error</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">RenderError</span><span class="hl-1">(</span><span class="hl-3">&quot;Failed to render product page&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">// Function that fetches all data needed and renders a product page</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">renderProductPage</span><span class="hl-1"> = (</span><span class="hl-2">id</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">product</span><span class="hl-1"> = </span><span class="hl-7">getProduct</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-7">renderProduct</span><span class="hl-1">(</span><span class="hl-2">product</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">TypeError</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">// Change error type, adding more details and keeping parent error message and stack trace</span><br/><span class="hl-1">            </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">InternalServerError</span><span class="hl-1">(</span><span class="hl-3">&quot;Failed to get product&quot;</span><span class="hl-1">, { </span><span class="hl-2">id</span><span class="hl-1"> }, </span><span class="hl-2">error</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1">; </span><span class="hl-4">// rethrow error otherwise</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">// Main app operation</span><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">html</span><span class="hl-1"> = </span><span class="hl-7">renderProductPage</span><span class="hl-1">(</span><span class="hl-2">req</span><span class="hl-1">.</span><span class="hl-6">GET</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">res</span><span class="hl-1">.</span><span class="hl-7">send</span><span class="hl-1">(</span><span class="hl-2">html</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">// Making sure we always work with errors</span><br/><span class="hl-1">    </span><span class="hl-4">// If we caught something that is not an error, we will create an instance of UnknownError</span><br/><span class="hl-1">    </span><span class="hl-4">// Otherwise it will be still the same value as `e`</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">normalizedError</span><span class="hl-1"> = </span><span class="hl-2">UnknownError</span><span class="hl-1">.</span><span class="hl-7">normalize</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// Let&#39;s log the error to some service</span><br/><span class="hl-1">    </span><span class="hl-2">loggingService</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">normalizedError</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">, </span><span class="hl-2">normalizedError</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1">, </span><span class="hl-2">normalizedError</span><span class="hl-1">.</span><span class="hl-2">details</span><span class="hl-1">, </span><span class="hl-7">String</span><span class="hl-1">(</span><span class="hl-2">e</span><span class="hl-1">.</span><span class="hl-2">names</span><span class="hl-1">), </span><span class="hl-2">normalizedError</span><span class="hl-1">.</span><span class="hl-2">stack</span><br/><span class="hl-1">    );</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// Use error instance type to determine return code</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">NotFoundError</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">res</span><span class="hl-1">.</span><span class="hl-7">send</span><span class="hl-1">(</span><span class="hl-2">router</span><span class="hl-1">.</span><span class="hl-7">renderError</span><span class="hl-1">(</span><span class="hl-9">404</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">res</span><span class="hl-1">.</span><span class="hl-7">send</span><span class="hl-1">(</span><span class="hl-2">router</span><span class="hl-1">.</span><span class="hl-7">renderError</span><span class="hl-1">(</span><span class="hl-9">500</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current"><a href="../../modules.html">@ezez/errors -<wbr/> v6.0.2</a>
<ul>
<li class="current selected pages-entry pages-entry-page pages-entry-depth-1"><a href="Introduction.html">Introduction</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-1"><a href="Options.html">Options</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-1"><a href="TypeScript.html">Type<wbr/>Script tips</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-1"><a href="../CHANGELOG.html">Changelog</a></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky">
<ul>
<li class="tsd-kind-interface"><a href="../../interfaces/CustomError.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-interface)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6" id="icon-256-path"></rect><path d="M9.51 16V15.016H11.298V8.224H9.51V7.24H14.19V8.224H12.402V15.016H14.19V16H9.51Z" fill="var(--color-text)" id="icon-256-text"></path></svg>Custom<wbr/>Error</a></li>
<li class="tsd-kind-interface"><a href="../../interfaces/Options.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><use href="#icon-256-path"></use><use href="#icon-256-text"></use></svg>Options</a></li>
<li class="tsd-kind-type-alias"><a href="../../types/CustomErrorConstructor.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><rect fill="var(--color-icon-background)" stroke="var(--color-ts)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6" id="icon-4194304-path"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)" id="icon-4194304-text"></path></svg>Custom<wbr/>Error<wbr/>Constructor</a></li>
<li class="tsd-kind-function"><a href="../../functions/createError.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-function)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6" id="icon-64-path"></rect><path d="M9.39 16V7.24H14.55V8.224H10.446V11.128H14.238V12.112H10.47V16H9.39Z" fill="var(--color-text)" id="icon-64-text"></path></svg>create<wbr/>Error</a></li>
<li class="tsd-kind-function"><a href="../../functions/setDefaultOptions.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><use href="#icon-64-path"></use><use href="#icon-64-text"></use></svg>set<wbr/>Default<wbr/>Options</a></li></ul></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="../../assets/main.js"></script></body></html>